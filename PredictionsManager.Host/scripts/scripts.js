"use strict";angular.module("frontendApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","LocalStorageModule","ui.bootstrap","ui.bootstrap.datetimepicker"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/leaguetable",{templateUrl:"views/leaguetable.html",controller:"LeaguetableCtrl"}).when("/player/:playerName",{templateUrl:"views/player.html",controller:"PlayerCtrl"}).when("/playergameweek/:playerName/:gameWeekNo",{templateUrl:"views/playergameweek.html",controller:"PlayergameweekCtrl"}).when("/openfixtures",{templateUrl:"views/openfixtures.html",controller:"OpenfixturesCtrl"}).when("/admin/addgameweek",{templateUrl:"views/adminaddgameweek.html",controller:"AdminaddgameweekCtrl"}).when("/admin/addresults",{templateUrl:"views/adminaddresults.html",controller:"AdminaddresultsCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("frontendApp").controller("MainCtrl",["$scope",function(){}]),angular.module("frontendApp").controller("LeaguetableCtrl",["$scope","$http",function(a,b){b.get("/api/leaguetable").success(function(b){a.isLoaded=!0,a.model=b})}]),angular.module("frontendApp").controller("PlayerCtrl",["$scope","$http","$routeParams",function(a,b,c){var d="/api/player/"+c.playerName;b.get(d).success(function(b){a.isLoaded=!0,a.model=b}),a.playerName=c.playerName}]),angular.module("frontendApp").controller("PlayergameweekCtrl",["$scope","$http","$routeParams",function(a,b,c){var d="/api/playergameweek/"+c.playerName+"/"+c.gameWeekNo;b.get(d).success(function(b){a.isLoaded=!0,a.model=b}),a.playerName=c.playerName,a.gameWeekNo=c.gameWeekNo}]),angular.module("frontendApp").controller("NavCtrl",["$scope","auth",function(a,b){b.withPlayer(function(b){a.player=b})}]),angular.module("frontendApp").controller("OpenfixturesCtrl",["$scope","$http",function(a,b){b.get("/api/openfixtures").success(function(b){a.isLoaded=!0,a.model=b}),a.submitResult=function(c,d){var e={fixtureId:c.fxId,score:{home:c.homeScore,away:c.awayScore}};b.post("/api/prediction",e).success(function(){a.model.rows.splice(d,1),c.submitted=!0})}}]),angular.module("frontendApp").controller("AdminaddgameweekCtrl",["$scope","$http","$location","localStorageService","notify",function(a,b,c,d,e){a.gameweek={fixtures:[{home:"",away:"",kickoff:new Date},{home:"",away:"",kickoff:new Date},{home:"",away:"",kickoff:new Date}]},b.get("/api/admin/getnewgameweekno").success(function(b){a.gameweek.number=b}),a.addFixture=function(){var b=a.gameweek.fixtures[a.gameweek.fixtures.length-1],c=angular.copy(b.kickoff);a.gameweek.fixtures.push({home:"",away:"",kickoff:c})},a.removeFixture=function(b){a.gameweek.fixtures.splice(b,1)},a.submit=function(){b.post("/api/admin/gameweek",a.gameweek).success(function(){e.success("gameweek added"),c.path("openfixtures")})}}]),angular.module("frontendApp").controller("AdminaddresultsCtrl",["$scope","$http",function(a,b){b.get("/api/admin/getfixturesawaitingresults").success(function(b){a.isLoaded=!0,a.model=b}),a.submitResult=function(c,d){var e={fixtureId:c.fxId,score:{home:c.homeScore,away:c.awayScore}};b.post("/api/admin/result",e).success(function(){a.model.rows.splice(d,1),c.submitted=!0})}}]),angular.module("frontendApp").service("auth",["$http",function(a){var b=function(b){a.get("/api/whoami").success(function(a){b(a)})};return{withPlayer:b}}]),angular.module("frontendApp").factory("interceptor",["$q","notify",function(a,b){return{request:function(a){return a},responseError:function(c){return b.fail(c.statusText+" - "+c.data),a.reject(c)}}}]),angular.module("frontendApp").config(["$httpProvider",function(a){a.interceptors.push("interceptor")}]),angular.module("frontendApp").directive("submitscore",function(){return{templateUrl:"views/submitscore.html",restrict:"E"}}),angular.module("frontendApp").directive("loading",function(){return{templateUrl:"views/loading.html",restrict:"E"}}),angular.module("frontendApp").service("notify",function(){var a=[],b=function(b){a.push({type:"success",msg:b})},c=function(b){a.push({type:"danger",msg:b})},d=function(b){a.splice(b,1)};return{notifications:a,success:b,fail:c,close:d}}),angular.module("frontendApp").controller("NotificationsCtrl",["$scope","notify",function(a,b){a.alerts=b.notifications,a.closeAlert=function(a){b.close(a)}}]);